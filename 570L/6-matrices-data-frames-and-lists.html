<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>A Sufficient Introduction to R</title>
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
  <meta name="description" content="These notes serve as an introduction to R, but certainly is not comprehensive. The intention is to teach students enought to be able to work with data frames and make graphs using ggplot2. I also cover a range of common data issues that PhD students often have to address.">
  <meta name="generator" content="bookdown 0.1.5 and GitBook 2.6.7">

  <meta property="og:title" content="A Sufficient Introduction to R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="These notes serve as an introduction to R, but certainly is not comprehensive. The intention is to teach students enought to be able to work with data frames and make graphs using ggplot2. I also cover a range of common data issues that PhD students often have to address." />
  <meta name="github-repo" content="dereksonderegger/STA_570L_Book" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="A Sufficient Introduction to R" />
  
  <meta name="twitter:description" content="These notes serve as an introduction to R, but certainly is not comprehensive. The intention is to teach students enought to be able to work with data frames and make graphs using ggplot2. I also cover a range of common data issues that PhD students often have to address." />
  

<meta name="author" content="Derek L. Sonderegger">

<meta name="date" content="2016-08-29">

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: { equationNumbers: { autoNumber: "AMS" } }
});
</script>

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="5-basic-graphing.html">


<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>


  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Sufficient Introduction to R</a></li>
<li><a href="https://dereksonderegger.github.io/570L/A_Sufficient_Introduction_to_R.pdf" target="blank">PDF version</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#r-as-a-simple-calculator"><i class="fa fa-check"></i><b>1.1</b> R as a simple calculator</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#assignment"><i class="fa fa-check"></i><b>1.2</b> Assignment</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#scripts-and-rmarkdown"><i class="fa fa-check"></i><b>1.3</b> Scripts and RMarkdown</a><ul>
<li class="chapter" data-level="1.3.1" data-path="index.html"><a href="index.html#r-scripts-.r-files"><i class="fa fa-check"></i><b>1.3.1</b> R Scripts (.R files)</a></li>
<li class="chapter" data-level="1.3.2" data-path="index.html"><a href="index.html#r-markdown-.rmd-files"><i class="fa fa-check"></i><b>1.3.2</b> R Markdown (.Rmd files)</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#packages"><i class="fa fa-check"></i><b>1.4</b> Packages</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#exercises"><i class="fa fa-check"></i><b>1.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="2-vectors.html"><a href="2-vectors.html"><i class="fa fa-check"></i><b>2</b> Vectors</a><ul>
<li class="chapter" data-level="2.1" data-path="2-vectors.html"><a href="2-vectors.html#accessing-vector-elements"><i class="fa fa-check"></i><b>2.1</b> Accessing Vector Elements</a></li>
<li class="chapter" data-level="2.2" data-path="2-vectors.html"><a href="2-vectors.html#scalar-functions-applied-to-vectors"><i class="fa fa-check"></i><b>2.2</b> Scalar Functions Applied to Vectors</a></li>
<li class="chapter" data-level="2.3" data-path="2-vectors.html"><a href="2-vectors.html#vector-algebra"><i class="fa fa-check"></i><b>2.3</b> Vector Algebra</a></li>
<li class="chapter" data-level="2.4" data-path="2-vectors.html"><a href="2-vectors.html#commonly-used-vector-functions"><i class="fa fa-check"></i><b>2.4</b> Commonly Used Vector Functions</a></li>
<li class="chapter" data-level="2.5" data-path="2-vectors.html"><a href="2-vectors.html#exercises-1"><i class="fa fa-check"></i><b>2.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="3-statistical-tables.html"><a href="3-statistical-tables.html"><i class="fa fa-check"></i><b>3</b> Statistical Tables</a><ul>
<li class="chapter" data-level="3.1" data-path="3-statistical-tables.html"><a href="3-statistical-tables.html#mosaicplotdist-function"><i class="fa fa-check"></i><b>3.1</b> <code>mosaic::plotDist()</code> function</a></li>
<li class="chapter" data-level="3.2" data-path="3-statistical-tables.html"><a href="3-statistical-tables.html#base-r-functions"><i class="fa fa-check"></i><b>3.2</b> Base R functions</a><ul>
<li class="chapter" data-level="3.2.1" data-path="3-statistical-tables.html"><a href="3-statistical-tables.html#d-function"><i class="fa fa-check"></i><b>3.2.1</b> d-function</a></li>
<li class="chapter" data-level="3.2.2" data-path="3-statistical-tables.html"><a href="3-statistical-tables.html#p-function"><i class="fa fa-check"></i><b>3.2.2</b> p-function</a></li>
<li class="chapter" data-level="3.2.3" data-path="3-statistical-tables.html"><a href="3-statistical-tables.html#q-function"><i class="fa fa-check"></i><b>3.2.3</b> <code>q</code>-function</a></li>
<li class="chapter" data-level="3.2.4" data-path="3-statistical-tables.html"><a href="3-statistical-tables.html#r-function"><i class="fa fa-check"></i><b>3.2.4</b> r-function</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="3-statistical-tables.html"><a href="3-statistical-tables.html#exercises-2"><i class="fa fa-check"></i><b>3.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="4-data-types.html"><a href="4-data-types.html"><i class="fa fa-check"></i><b>4</b> Data Types</a><ul>
<li class="chapter" data-level="4.1" data-path="4-data-types.html"><a href="4-data-types.html#integers-and-numerics"><i class="fa fa-check"></i><b>4.1</b> Integers and Numerics</a></li>
<li class="chapter" data-level="4.2" data-path="4-data-types.html"><a href="4-data-types.html#character-strings"><i class="fa fa-check"></i><b>4.2</b> Character Strings</a></li>
<li class="chapter" data-level="4.3" data-path="4-data-types.html"><a href="4-data-types.html#factors"><i class="fa fa-check"></i><b>4.3</b> Factors</a></li>
<li class="chapter" data-level="4.4" data-path="4-data-types.html"><a href="4-data-types.html#logicals"><i class="fa fa-check"></i><b>4.4</b> Logicals</a></li>
<li class="chapter" data-level="4.5" data-path="4-data-types.html"><a href="4-data-types.html#exercises-3"><i class="fa fa-check"></i><b>4.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="5-basic-graphing.html"><a href="5-basic-graphing.html"><i class="fa fa-check"></i><b>5</b> Basic Graphing</a><ul>
<li class="chapter" data-level="5.1" data-path="5-basic-graphing.html"><a href="5-basic-graphing.html#univariate-graphs"><i class="fa fa-check"></i><b>5.1</b> Univariate Graphs</a><ul>
<li class="chapter" data-level="5.1.1" data-path="5-basic-graphing.html"><a href="5-basic-graphing.html#histograms"><i class="fa fa-check"></i><b>5.1.1</b> Histograms</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="5-basic-graphing.html"><a href="5-basic-graphing.html#bivariate-plots"><i class="fa fa-check"></i><b>5.2</b> Bivariate Plots</a><ul>
<li class="chapter" data-level="5.2.1" data-path="5-basic-graphing.html"><a href="5-basic-graphing.html#boxplots"><i class="fa fa-check"></i><b>5.2.1</b> Boxplots</a></li>
<li class="chapter" data-level="5.2.2" data-path="5-basic-graphing.html"><a href="5-basic-graphing.html#scatterplots"><i class="fa fa-check"></i><b>5.2.2</b> Scatterplots</a></li>
<li class="chapter" data-level="5.2.3" data-path="5-basic-graphing.html"><a href="5-basic-graphing.html#arbitrary-curves"><i class="fa fa-check"></i><b>5.2.3</b> Arbitrary Curves</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="5-basic-graphing.html"><a href="5-basic-graphing.html#advanced-tricks"><i class="fa fa-check"></i><b>5.3</b> Advanced tricks</a><ul>
<li class="chapter" data-level="5.3.1" data-path="5-basic-graphing.html"><a href="5-basic-graphing.html#blank-plots"><i class="fa fa-check"></i><b>5.3.1</b> Blank plots</a></li>
<li class="chapter" data-level="5.3.2" data-path="5-basic-graphing.html"><a href="5-basic-graphing.html#points"><i class="fa fa-check"></i><b>5.3.2</b> Points</a></li>
<li class="chapter" data-level="5.3.3" data-path="5-basic-graphing.html"><a href="5-basic-graphing.html#lines"><i class="fa fa-check"></i><b>5.3.3</b> Lines</a></li>
<li class="chapter" data-level="5.3.4" data-path="5-basic-graphing.html"><a href="5-basic-graphing.html#contour-plots"><i class="fa fa-check"></i><b>5.3.4</b> Contour Plots</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="6-matrices-data-frames-and-lists.html"><a href="6-matrices-data-frames-and-lists.html"><i class="fa fa-check"></i><b>6</b> Matrices, Data Frames, and Lists</a><ul>
<li class="chapter" data-level="6.1" data-path="6-matrices-data-frames-and-lists.html"><a href="6-matrices-data-frames-and-lists.html#matrices"><i class="fa fa-check"></i><b>6.1</b> Matrices</a></li>
<li class="chapter" data-level="6.2" data-path="6-matrices-data-frames-and-lists.html"><a href="6-matrices-data-frames-and-lists.html#data-frames"><i class="fa fa-check"></i><b>6.2</b> Data Frames</a></li>
<li class="chapter" data-level="6.3" data-path="6-matrices-data-frames-and-lists.html"><a href="6-matrices-data-frames-and-lists.html#lists"><i class="fa fa-check"></i><b>6.3</b> Lists</a></li>
<li class="chapter" data-level="6.4" data-path="6-matrices-data-frames-and-lists.html"><a href="6-matrices-data-frames-and-lists.html#exercises-4"><i class="fa fa-check"></i><b>6.4</b> Exercises</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">A Sufficient Introduction to R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="matrices-data-frames-and-lists" class="section level1">
<h1><span class="header-section-number">Chapter 6</span> Matrices, Data Frames, and Lists</h1>
<div id="matrices" class="section level2">
<h2><span class="header-section-number">6.1</span> Matrices</h2>
<p>We often want to store numerical data in a square or rectangular format and mathematicians will call these “matrices”. These will have two dimensions, rows and columns. To create a matrix in R we can create it directly using the <code>matrix()</code> command which requires the data to fill the matrix with, and optionally, some information about the number of rows and columns:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">W &lt;-<span class="st"> </span><span class="kw">matrix</span>( <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>), <span class="dt">nrow=</span><span class="dv">2</span>, <span class="dt">ncol=</span><span class="dv">3</span> )
W</code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    3    5
## [2,]    2    4    6</code></pre>
<p>Notice that because we only gave it six values, the information the number of columns is redundant and could be left off and R would figure out how many columns are needed. Next notice that the order that R chose to fill in the matrix was to fill in the first column then the second, and then the third. If we wanted to fill the matrix in order of the rows first, then we’d use the optional <code>byrow=TRUE</code> argument.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">W &lt;-<span class="st"> </span><span class="kw">matrix</span>( <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>), <span class="dt">nrow=</span><span class="dv">2</span>, <span class="dt">byrow=</span><span class="ot">TRUE</span> )
W</code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    2    3
## [2,]    4    5    6</code></pre>
<p>The alternative to the <code>matrix()</code> command is we could create two columns as individual vectors and just push them together. Or we could have made three rows and lump them by rows instead. To do this we’ll use a group of functions that bind vectors together. To join two column vectors together, we’ll use <code>cbind</code> and to bind rows together we’ll use the <code>rbind</code> function</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">a &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>)
b &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>)
<span class="kw">cbind</span>(a,b)  <span class="co"># Column Bind:  a,b are columns in resultant matrix </span></code></pre></div>
<pre><code>##      a b
## [1,] 1 4
## [2,] 2 5
## [3,] 3 6</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rbind</span>(a,b)  <span class="co"># Row Bind:     a,b are   rows  in resultant matrix    </span></code></pre></div>
<pre><code>##   [,1] [,2] [,3]
## a    1    2    3
## b    4    5    6</code></pre>
<p>Notice that doing this has provided R with some names for the individual rows and columns. I can change these using the commands <code>colnames()</code> and <code>rownames()</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">M &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="dv">1</span>:<span class="dv">6</span>, <span class="dt">nrow=</span><span class="dv">3</span>, <span class="dt">ncol=</span><span class="dv">2</span>, <span class="dt">byrow=</span><span class="ot">TRUE</span>) 
<span class="kw">colnames</span>(M) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;Column1&#39;</span>, <span class="st">&#39;Column2&#39;</span>)       <span class="co"># set column labels</span>
<span class="kw">rownames</span>(M) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;Row1&#39;</span>, <span class="st">&#39;Row2&#39;</span>,<span class="st">&#39;Row3&#39;</span>)      <span class="co"># set row labels</span>
M</code></pre></div>
<pre><code>##      Column1 Column2
## Row1       1       2
## Row2       3       4
## Row3       5       6</code></pre>
<p>This is actually a pretty peculiar way of setting the <em>attributes</em> of the object <code>M</code> because it looks like we are evaluating a function and assigning some value to the function output. Yes it is weird, but R was developed in the 70s and it seemed like a good idea at the time.</p>
<p>Accessing a particular element of a matrix is done in a similar manner as with vectors, using the <code>[ ]</code> notation, but this time we must specify which row and which column. Notice that this scheme always is <code>[row, col]</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">M1 &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="dv">1</span>:<span class="dv">6</span>, <span class="dt">nrow=</span><span class="dv">3</span>, <span class="dt">ncol=</span><span class="dv">2</span>)
M1</code></pre></div>
<pre><code>##      [,1] [,2]
## [1,]    1    4
## [2,]    2    5
## [3,]    3    6</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">M1[<span class="dv">1</span>,<span class="dv">2</span>]     <span class="co"># Grab row 1, column 2 value</span></code></pre></div>
<pre><code>## [1] 4</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">M1[<span class="dv">1</span>, <span class="dv">1</span>:<span class="dv">2</span>]  <span class="co"># Grab row 1, and columns 1 and 2.</span></code></pre></div>
<pre><code>## [1] 1 4</code></pre>
<p>I might want to grab a single row or a single column out of a matrix, which is sometimes referred to as taking a slice of the matrix. I could figure out how long that vector is, but often I’m too lazy. Instead I can just specify the specify the particular row or column I want.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">M1</code></pre></div>
<pre><code>##      [,1] [,2]
## [1,]    1    4
## [2,]    2    5
## [3,]    3    6</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">M1[<span class="dv">1</span>, ]    <span class="co"># grab the 1st row </span></code></pre></div>
<pre><code>## [1] 1 4</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">M1[ ,<span class="dv">2</span>]    <span class="co"># grab second column (the spaces are optional...)</span></code></pre></div>
<pre><code>## [1] 4 5 6</code></pre>
</div>
<div id="data-frames" class="section level2">
<h2><span class="header-section-number">6.2</span> Data Frames</h2>
<p>Matrices are great for mathematical operations, but I also want to be able to store data that is numerical. For example I might want to store a categorical variable such as manufacturer brand. To generalize our concept of a matrix to include these types of data, we will create a structure called a <code>data.frame</code>. These are very much like a simple Excel spreadsheet where each column represents a different trait or measurement type and each row will represent an individual.</p>
<p>Perhaps the easiest way to create a data frame is to just type the columns of data</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">data &lt;-<span class="st"> </span><span class="kw">data.frame</span>(
  <span class="dt">Name  =</span> <span class="kw">c</span>(<span class="st">&#39;Bob&#39;</span>,<span class="st">&#39;Jeff&#39;</span>,<span class="st">&#39;Mary&#39;</span>),   
  <span class="dt">Score =</span> <span class="kw">c</span>(<span class="dv">90</span>, <span class="dv">75</span>, <span class="dv">92</span>)
)
<span class="co"># Show the data.frame </span>
data</code></pre></div>
<pre><code>##   Name Score
## 1  Bob    90
## 2 Jeff    75
## 3 Mary    92</code></pre>
<p>Because a data frame feels like a matrix, R also allows matrix notation for accessing particular values.</p>
<table>
<thead>
<tr class="header">
<th>Format</th>
<th>Result</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>[a,b]</code></td>
<td>Element in row <code>a</code> and column <code>b</code></td>
</tr>
<tr class="even">
<td><code>[a,]</code></td>
<td>All of row <code>a</code></td>
</tr>
<tr class="odd">
<td><code>[,b]</code></td>
<td>All of column <code>b</code></td>
</tr>
</tbody>
</table>
<p>Because the columns have meaning and we have given them column names, it is desirable to want to access an element by the name of the column as opposed to the column number.In large Excel spreadsheets I often get annoyed trying to remember which column something was in and muttering “Was total biomass in column P or Q?” A system where I could just name the column Total.Biomass and be done with it is much nicer to work with and I make fewer dumb mistakes.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">data$Name       <span class="co"># The $-sign means to reference a column by its label</span></code></pre></div>
<pre><code>## [1] Bob  Jeff Mary
## Levels: Bob Jeff Mary</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">data$Name[<span class="dv">2</span>]    <span class="co"># Notice that data$Name results in a vector, which I can manipulate</span></code></pre></div>
<pre><code>## [1] Jeff
## Levels: Bob Jeff Mary</code></pre>
<p>I can mix the <code>[ ]</code> notation with the column names. The following is also acceptable:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">data[, <span class="st">&#39;Name&#39;</span>]   <span class="co"># Grab the column labeled &#39;Name&#39;</span></code></pre></div>
<pre><code>## [1] Bob  Jeff Mary
## Levels: Bob Jeff Mary</code></pre>
<p>The next thing we might wish to do is add a new column to a preexisting data frame. There are two ways to do this. First, we could use the <code>cbind()</code> function to bind two data frames together. Second we could reference a new column name and assign values to it.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Second.score &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">Score2=</span><span class="kw">c</span>(<span class="dv">41</span>,<span class="dv">42</span>,<span class="dv">43</span>))  <span class="co"># another data.frame</span>
data &lt;-<span class="st">  </span><span class="kw">cbind</span>( data, Second.score )            <span class="co"># squish them together</span>
data</code></pre></div>
<pre><code>##   Name Score Score2
## 1  Bob    90     41
## 2 Jeff    75     42
## 3 Mary    92     43</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># if you assign a value to a column that doesn&#39;t exist, R will create it</span>
data$Score3 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">61</span>,<span class="dv">62</span>,<span class="dv">63</span>) <span class="co"># the Score3 column will created</span>
data</code></pre></div>
<pre><code>##   Name Score Score2 Score3
## 1  Bob    90     41     61
## 2 Jeff    75     42     62
## 3 Mary    92     43     63</code></pre>
<p>Data frames are very commonly used and many commonly used functions will take a <code>data=</code> argument and all other arguments are assumed to be in the given data frame. Unfortunately this is not universally supported by all functions and you must look at the help file for the function you are interested in.</p>
<p>Data frames are also very restricive in that the shape of the data must be rectangular. If I try to create a new column that doesn’t have enough rows, R will complain.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">data$Score4 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>)</code></pre></div>
<pre><code>## Error in `$&lt;-.data.frame`(`*tmp*`, &quot;Score4&quot;, value = c(1, 2)): replacement has 2 rows, data has 3</code></pre>
</div>
<div id="lists" class="section level2">
<h2><span class="header-section-number">6.3</span> Lists</h2>
<p>Data frames are quite useful for storing data but sometimes we’ll need to store a bunch of different pieces of information and it won’t fit neatly as a data frame. The most general form of a data structure is called a list. This can be thought of as a vector of objects where there is no requirement for each element to be the same type of object.</p>
<p>Consider that I might need to store information about person. For example, suppose that I want make an object that holds information about my immediate family. This object should have my spouse’s name (just one name) as well as my siblings. But because I have many siblings, I want the siblings to be a vector of names. Likewise I might also include my pets, but we don’t want any requirement that the number of pets is the same as the number of siblings (or spouses!).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">wife &lt;-<span class="st"> &#39;Aubrey&#39;</span>
sibs &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;Tina&#39;</span>,<span class="st">&#39;Caroline&#39;</span>,<span class="st">&#39;Brandon&#39;</span>,<span class="st">&#39;John&#39;</span>)
pets &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;Beau&#39;</span>,<span class="st">&#39;Tess&#39;</span>,<span class="st">&#39;Kaylee&#39;</span>)
Derek &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">Spouse=</span>wife, <span class="dt">Siblings=</span>sibs, <span class="dt">Pets=</span>pets) <span class="co"># Create the list</span>
<span class="kw">str</span>(Derek) <span class="co"># show the structure of object</span></code></pre></div>
<pre><code>## List of 3
##  $ Spouse  : chr &quot;Aubrey&quot;
##  $ Siblings: chr [1:4] &quot;Tina&quot; &quot;Caroline&quot; &quot;Brandon&quot; &quot;John&quot;
##  $ Pets    : chr [1:3] &quot;Beau&quot; &quot;Tess&quot; &quot;Kaylee&quot;</code></pre>
<p>Notice that the object <code>Derek</code> is a list of three elements. The first is the single string containing my wife’s name. The next is a vector of my siblings’ names and it is a vector of length four. Finally the vector of pets’ names is only of length three.</p>
<p>To access any element of this list we can use an indexing scheme similar to matrices and vectors. The only difference is that we’ll use two square brackets instead of one.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Derek[[ <span class="dv">1</span> ]]    <span class="co"># First element of the list is Spouse!</span></code></pre></div>
<pre><code>## [1] &quot;Aubrey&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Derek[[ <span class="dv">3</span> ]]    <span class="co"># Third element of the list is the vector of pets</span></code></pre></div>
<pre><code>## [1] &quot;Beau&quot;   &quot;Tess&quot;   &quot;Kaylee&quot;</code></pre>
<p>There is a second way I can access elements. For data frames it was convenient to use the notation <code>DataFrame$ColumnName</code> and we will use the same convention for lists. Actually a data frame is just a list with the requirement that each list element is a vector and all vectors are of the same length. To access my pets names we can use the following notation:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Derek$Pets         <span class="co"># Using the &#39;$&#39; notation</span></code></pre></div>
<pre><code>## [1] &quot;Beau&quot;   &quot;Tess&quot;   &quot;Kaylee&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Derek[[ <span class="st">&#39;Pets&#39;</span> ]]  <span class="co"># Using the &#39;[[ ]]&#39; notation</span></code></pre></div>
<pre><code>## [1] &quot;Beau&quot;   &quot;Tess&quot;   &quot;Kaylee&quot;</code></pre>
<p>To add something new to the list object, we can just make an assignment in a similar fashion as we did for <code>data.frame</code> and just assign a value to a slot that doesn’t (yet!) exist.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Derek$Spawn &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;Elise&#39;</span>, <span class="st">&#39;Casey&#39;</span>)</code></pre></div>
<p>We can also add extremely complicated items to my list. Here we’ll add a <code>data.frame</code> as another list element.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Recall that we previous had defined a data.frame called &quot;data&quot;</span>
Derek$RandomDataFrame &lt;-<span class="st"> </span>data  <span class="co"># Assign it to be a list element</span>
<span class="kw">str</span>(Derek)</code></pre></div>
<pre><code>## List of 5
##  $ Spouse         : chr &quot;Aubrey&quot;
##  $ Siblings       : chr [1:4] &quot;Tina&quot; &quot;Caroline&quot; &quot;Brandon&quot; &quot;John&quot;
##  $ Pets           : chr [1:3] &quot;Beau&quot; &quot;Tess&quot; &quot;Kaylee&quot;
##  $ Spawn          : chr [1:2] &quot;Elise&quot; &quot;Casey&quot;
##  $ RandomDataFrame:&#39;data.frame&#39;: 3 obs. of  4 variables:
##   ..$ Name  : Factor w/ 3 levels &quot;Bob&quot;,&quot;Jeff&quot;,&quot;Mary&quot;: 1 2 3
##   ..$ Score : num [1:3] 90 75 92
##   ..$ Score2: num [1:3] 41 42 43
##   ..$ Score3: num [1:3] 61 62 63</code></pre>
<p>Now we see that the list <code>Derek</code> has five elements and some of those elements are pretty complicated. In fact, I could happily have lists of lists and have a very complicated nesting structure.</p>
<p>The place that most users will run into lists is that the output of many statistical procedures will return the results in a list object. When a user asks R to perform a regression, the output returned is a list object, and we’ll need to grab particular information from that object afterwards. For example, the output from a t-test in R is a list:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="fl">5.1</span>, <span class="fl">4.9</span>, <span class="fl">5.6</span>, <span class="fl">4.2</span>, <span class="fl">4.8</span>, <span class="fl">4.5</span>, <span class="fl">5.3</span>, <span class="fl">5.2</span>)   <span class="co"># some toy data</span>
results &lt;-<span class="st"> </span><span class="kw">t.test</span>(x, <span class="dt">alternative=</span><span class="st">&#39;less&#39;</span>, <span class="dt">mu=</span><span class="dv">5</span>)   <span class="co"># do a t-test</span>
<span class="kw">str</span>(results)                                     <span class="co"># examine the resulting object</span></code></pre></div>
<pre><code>## List of 9
##  $ statistic  : Named num -0.314
##   ..- attr(*, &quot;names&quot;)= chr &quot;t&quot;
##  $ parameter  : Named num 7
##   ..- attr(*, &quot;names&quot;)= chr &quot;df&quot;
##  $ p.value    : num 0.381
##  $ conf.int   : atomic [1:2] -Inf 5.25
##   ..- attr(*, &quot;conf.level&quot;)= num 0.95
##  $ estimate   : Named num 4.95
##   ..- attr(*, &quot;names&quot;)= chr &quot;mean of x&quot;
##  $ null.value : Named num 5
##   ..- attr(*, &quot;names&quot;)= chr &quot;mean&quot;
##  $ alternative: chr &quot;less&quot;
##  $ method     : chr &quot;One Sample t-test&quot;
##  $ data.name  : chr &quot;c(5.1, 4.9, 5.6, 4.2, 4.8, 4.5, 5.3, 5.2)&quot;
##  - attr(*, &quot;class&quot;)= chr &quot;htest&quot;</code></pre>
<p>We see that result is actually a list with 9 elements in it. To access the p-value we could use:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">results$p.value</code></pre></div>
<pre><code>## [1] 0.3813385</code></pre>
<p>If I ask R to print the object <code>results</code>, it will hide the structure from you and print it in a “pretty” fashion because there is a <code>print</code> function defined specifically for objects created by the <code>t.test()</code> function.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">results</code></pre></div>
<pre><code>## 
##  One Sample t-test
## 
## data:  c(5.1, 4.9, 5.6, 4.2, 4.8, 4.5, 5.3, 5.2)
## t = -0.31399, df = 7, p-value = 0.3813
## alternative hypothesis: true mean is less than 5
## 95 percent confidence interval:
##      -Inf 5.251691
## sample estimates:
## mean of x 
##      4.95</code></pre>
</div>
<div id="exercises-4" class="section level2">
<h2><span class="header-section-number">6.4</span> Exercises</h2>
<ol style="list-style-type: decimal">
<li><p>In this problem, we will work with the matrix</p>
<p><span class="math display">\[ \left[\begin{array}{ccccc}
2 &amp; 4 &amp; 6 &amp; 8 &amp; 10\\
12 &amp; 14 &amp; 16 &amp; 18 &amp; 20\\
22 &amp; 24 &amp; 26 &amp; 28 &amp; 30
\end{array}\right]\]</span></p>
<ol style="list-style-type: lower-alpha">
<li>Create the matrix in two ways and save the resulting matrix as <code>M</code>.
<ol style="list-style-type: lower-roman">
<li>Create the matrix using some combination of the <code>seq()</code> and <code>matrix()</code> commands.</li>
<li>Create the same matrix by some combination of multiple <code>seq()</code> commands and either the <code>rbind()</code> or <code>cbind()</code> command.</li>
</ol></li>
<li>Extract the second row out of <code>M</code>.</li>
<li>Extract the element in the third row and second column of <code>M</code>.</li>
</ol></li>
<li>Create and manipulate a data frame.
<ol style="list-style-type: lower-alpha">
<li>Create a <code>data.frame</code> named <code>my.trees</code> that has the following columns:
<ul>
<li>Girth = c(8.3, 8.6, 8.8, 10.5, 10.7, 10.8, 11.0)</li>
<li>Height= c(70, 65, 63, 72, 81, 83, 66)</li>
<li>Volume= c(10.3, 10.3, 10.2, 16.4, 18.8, 19.7, 15.6)</li>
</ul></li>
<li>Extract the third observation (i.e. the third row)</li>
<li>Extract the Girth column referring to it by name (don’t use whatever order you placed the columns in).</li>
<li>Print out a data frame of all the observations <em>except</em> for the fourth observation. (i.e. Remove the fourth observation/row.)</li>
</ol></li>
<li>Create and manipulate a list.
<ol style="list-style-type: lower-alpha">
<li>Create a list named my.test with elements
<ul>
<li>x = c(4,5,6,7,8,9,10)</li>
<li>y = c(34,35,41,40,45,47,51)</li>
<li>slope = 2.82</li>
<li>p.value = 0.000131</li>
</ul></li>
<li>Extract the second element in the list.</li>
<li>Extract the element named <code>p.value</code> from the list.</li>
</ol></li>
<li><p>The function <code>lm()</code> creates a linear model, which is a general class of model that includes both regression and ANOVA. We will call this on a data frame and examine the results. For this problem, there isn’t much to figure out, but rather the goal is to recognize the data structures being used in common analysis functions.</p>
<ol style="list-style-type: lower-alpha">
<li>There are many data sets that are included with R and its packages. One of which is the <code>trees</code> data which is a data set of <span class="math inline">\(n=31\)</span> cherry trees. Load this dataset into your current workspace using the command:</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">data</span>(trees)     <span class="co"># load trees data.frame</span></code></pre></div>
<ol start="2" style="list-style-type: lower-alpha">
<li><p>Examine the data frame using the <code>str()</code> command. Look at the help file for the data using the command <code>help(trees)</code> or <code>?trees</code>.</p></li>
<li><p>Perform a regression relating the volume of lumber produced to the girth and height of the tree using the following command</p></li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">m &lt;-<span class="st"> </span><span class="kw">lm</span>( Volume ~<span class="st"> </span>Girth +<span class="st"> </span>Height, <span class="dt">data=</span>trees)</code></pre></div>
<ol start="4" style="list-style-type: lower-alpha">
<li><p>Use the str() command to inspect <code>m</code>. Extract the model coefficients from this list.</p></li>
<li><p>The list m can be passed to other functions. For example, the function <code>summary()</code> will take the list and recognize that it was produced by the <code>lm()</code> function and produce a summary table in the manner that we are used to seeing. Produce that summary table using the command</p></li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(m)</code></pre></div>
<pre><code>## 
## Call:
## lm(formula = Volume ~ Girth + Height, data = trees)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -6.4065 -2.6493 -0.2876  2.2003  8.4847 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept) -57.9877     8.6382  -6.713 2.75e-07 ***
## Girth         4.7082     0.2643  17.816  &lt; 2e-16 ***
## Height        0.3393     0.1302   2.607   0.0145 *  
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 3.882 on 28 degrees of freedom
## Multiple R-squared:  0.948,  Adjusted R-squared:  0.9442 
## F-statistic:   255 on 2 and 28 DF,  p-value: &lt; 2.2e-16</code></pre></li>
</ol>

</div>
</div>









            </section>

          </div>
        </div>
      </div>
<a href="5-basic-graphing.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>


<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"facebook": true,
"twitter": true,
"google": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/dereksonderegger/STA_570L_Book/raw/master/06_MatricesDataFramesLists.Rmd",
"text": null
},
"download": null,
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    if (location.protocol !== "file:" && /^https?:/.test(script.src))
      script.src  = script.src.replace(/^https?:/, '');
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
